<app-admin-layout>
    <div class="col-md-12">
        <div class="card card-plain">
            <div class="card-header card-header-danger">
                <h4 class="card-title mt-0">Compétences</h4>
                <p class="card-category">Liste des compétences</p>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead class="">
                            <tr>
                                <th>ID</th>
                                <th>Nom</th>
                                <th>Maitrise (%)</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                        <ng-container *ngFor="let group of skillsGroups">
                            <tr>
                                <th colspan="3">
                                    <em [class]="'fa ' + group.Icon"></em> {{group.Name}}
                                </th>
                                <th>
                                    <a href="#" (click)="deleteGroup(group);">
                                        <em class="material-icons">remove_circle_outline</em>
                                    </a>
                                </th>
                            </tr>
                            <ng-container *ngFor="let skill of group.Skills">
                                <tr *ngIf="!skill.edit">
                                    <td>{{skill.SkillId}}</td>
                                    <td>{{skill.Name}}</td>
                                    <td>{{skill.Level}}</td>
                                    <td>
                                        <a href="#" (click)="openEditMode(skill);">
                                            <em class="material-icons">edit</em>
                                        </a>
                                        <a href="#" (click)="deleteSkill(skill);">
                                            <em class="material-icons">remove_circle_outline</em>
                                        </a>
                                    </td>
                                </tr>
                                <tr *ngIf="skill.edit">
                                    <td>
                                        {{form.SkillId}}
                                    </td>
                                    <td>
                                        <input type="text"
                                            title="Nom de la compétence"
                                            [(ngModel)]="form.Name"/>
                                    </td>
                                    <td>
                                        <input type="number" min="0" max="0" step="1"
                                            title="Niveau de maîtrise de la compétence"
                                            [(ngModel)]="form.Level"/>
                                    </td>
                                    <td>
                                        <a href="#" (click)="saveSkill(form);">
                                            <em class="material-icons">save</em>
                                        </a>
                                        <a href="#" (click)="cancelEditMode(skill);">
                                            <em class="material-icons">cancel</em>
                                        </a>
                                    </td>
                                </tr>
                            </ng-container>
                        </ng-container>

                        </tbody>
                    </table>
                </div>

                <a routerLink="/admin/skills/create" class="btn btn-danger pull-right mat-raised-button">
                    <em class="material-icons">add</em>
                </a>

            </div>
        </div>
    </div>
</app-admin-layout>
